<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>

    <header>
      <nav>
        <div class="logo">
            <a href="/index.html">
                 <img src="images/logo.png" alt="" href="/index.html">
            </a>
        </div>

        <ul>
          <li>
            <a>Find 3rd Max</a>
          </li>
        </ul>
        <div class="vl"></div>
      </nav>
    </header>


    <div class="max">
      <div style="display:inline-block;vertical-align:top;">
        <h1>Quicksort + Find Third Largest</h1>
        <label for="input">Input numbers separated by commas:</label>
        <br>
        <input type="text" id="input">
        <button onclick="quicksort()">Sort</button>

        <div class="output2">
          <div id="output"></div>
          <div id="third"></div>
          <div id="timer1">
          </div>
        </div>
        <script>
          let counter = 1;

          function quicksort() {
          const start1 = performance.now();

            const input = document.getElementById("input").value;
            //using input.split(",") to split and create array "Number" with .map
            const arr = input.split(",").map(Number);
            //output is set and used in function printout(arr) to show multiple steps
            const output = document.getElementById("output");
            //using innerHTML to clear input
            output.innerHTML = "";
            //defining a counter c 

            //calling quick sort helper that needs (arr, left, right, counter)
            QShelper(arr, 0, arr.length - 1, 0);
            console.log(arr);
            ThirdL(arr);
            counter = 1;
            const end1 = performance.now();
const total1 = end1 - start1;
document.getElementById("timer1").innerHTML = `Total time = ${total1} ms.`;
          }

          //helper function b/c arr is not defined before quicksort function
          function QShelper(arr, left, right) {
            if (left < right) {
              //PI = pivot index (basically where we start the sort from)
              const PI = partition(arr, left, right);
              //calling function 

              printout(arr);

              QShelper(arr, left, PI - 1); //before pivot index
              QShelper(arr, PI + 1, right); //after pivot index
            }
          }

          //from geeks for geeks pseudo code
          //"function takes last element as pivot, places pviot element at its correct position in
          //array, and places all smaller to left of pivot and all greater elements to right of pivot

          function partition(arr, left, right) {
            const pivot = arr[right];
            //pi = pivot index
            let PI = left;

            for (let i = left; i < right; i++) {
              //going through array to move elements smaller than pivot
              if (arr[i] < pivot) {
                swap(arr, i, PI);
                PI++;
              }
            }

            swap(arr, right, PI);
            return PI;
          }

          function swap(arr, i, j) {
            const temp = arr[i];
            arr[i] = arr[j];
            arr[j] = temp;
          }

          function printout(arr) {
            const output = document.getElementById("output");
            const iteration = document.createElement("p");
            iteration.innerText = `Step ${counter}: ${arr.toString()}`;
            output.appendChild(iteration);
            counter++;
          }

          function ThirdL(arr) {

            const length = arr.length;
            if (length >= 3) {
              const Third = document.getElementById("Third");
              third.innerHTML = "Third largest is " + arr[length - 3];
            } else {
              third.innerHTML = "array needs to have atleast 3 elements";
            }
          }

        </script>
      </div>
    </div>
    
   <div class = "max2">

     <h1>Third Max loop</h1>
      <label for="input2">Enter comma-separated numbers:</label>
      <br>
      <input type="text" id="input2">
      <button onclick="findThird()">Sort</button>
   <div class="output">
          <div id="output2"></div>
          <div id="third2"></div>
          <div id="timer2">
          </div>
        </div>
    <script>

      function thirdMax(arr) {
        let m1 = Number.NEGATIVE_INFINITY;
        let m2 = Number.NEGATIVE_INFINITY;
        let m3 = Number.NEGATIVE_INFINITY;

        for (let x of arr) {
          if (x > m1) {
            m3 = m2;
            m2 = m1;
            m1 = x;
            printout2([m1, m2, m3]);
          } else if (x > m2 && x < m1) {
            m3 = m2;
            m2 = x;
            printout2([m1, m2, m3]);
          } else if (x > m3 && x < m2) {
            m3 = x;
            printout2([m1, m2, m3]);
          }
        }

        return m3;
      }

      function findThird() {
      const start2 = performance.now();

        const input2 = document.getElementById("input2").value;
        const arr2 = input2.split(",").map(Number);
				output2.innerHTML = "";

        counter = 1;
        
        //for distinct
        let darr = new Set(arr2);

        if (darr.size === arr2.length && !arr2.includes(Number.NEGATIVE_INFINITY) && arr2.length >= 3) {
          let max3 = thirdMax(arr2);
          const end2 = performance.now();
const total1 = end2 - start2;
document.getElementById("timer2").innerHTML = `Total time = ${total1} ms.`;
          third2.innerHTML = "The third-largest element is: " + max3;
        }else if (darr.size != arr2.length) {
        	third2.innerHTML = "Not Distinct";
        }
        else {
          third2.innerHTML = "array needs to have atleast 3 elements";
        }
        
      }

      function printout2(arr) {
        const output = document.getElementById("output2");
        const iteration = document.createElement("p");
        iteration.innerText = `Step ${counter}: ${arr.toString()}`;
        output.appendChild(iteration);
        counter++;
      }
    </script>
    </div>

    <footer>
      Garrett Kostyk, Erik Nguyen, Jason Lee, Aaron Lee, Huy Nguyen
    </footer>
  </body>

</html>

<!--  
 -->
